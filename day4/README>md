# Rectangular Area Under Histogram

[Smart Interviews Problem: Rectangular Area Under Histogram](https://hive.smartinterviews.in/contests/smart-interviews-primary/problems/rectangular-area-under-histogram?page=0&pageSize=10&search=hist)

## Problem Statement

Given the heights of adjacent buildings, find the **largest rectangular area** possible. The largest rectangle consists of **contiguous buildings** of height at least some minimum, with **width 1** per building. Rectangle sides must be parallel to the axes.

### Input Format

- The first line contains `T` — the number of test cases.
- For each test case:
  - First line: `N` — the number of buildings.
  - Next line: `N` space-separated integers `A[i]` — the height of each building.

### Output Format

- For each test case, print the area of the largest possible rectangle (one per line).

### Constraints

**50 points:**  
`1 <= T <= 100`  
`1 <= N <= 1,000`  
`1 <= A[i] <= 1,000`  

**100 points:**  
`1 <= T <= 100`  
`1 <= N <= 100,000`  
`1 <= A[i] <= 10,000`  

---

## Approach

This is the classic **Largest Rectangle in Histogram** problem, solved efficiently using **monotonic stacks**:

- For each building, find the nearest smaller height on the left (`left[i]`) and right (`right[i]`).
- The largest area for that building is:
Area[i] = height[i] * (right[i] - left[i] - 1)

text
- Calculate this for every building and the answer is the maximum found.

**Algorithm:**
1. Use a stack to find, for each building, the nearest smaller on the left.
2. Use a stack (in reverse) for the nearest smaller on the right.
3. Calculate maximal area as above.

**Time Complexity:**  
- O(N) per test case (each building is only pushed and popped once to/from stack).

---

## Dry Run Examples

### Test Case 1
**Input:**
16
5 4 5 4 3 2 5 5 6 7 1 3 4 3 3 3

text
**Output:**  
20

text
**Explanation:**  
The largest rectangle uses indices 6 to 9 (5, 5, 6, 7), area = 5 * 4 = 20.

---

### Test Case 2
**Input:**
4
5 11 12 4

text
**Output:**  
22

text
**Explanation:**  
Largest area is formed by buildings at indices 1 and 2 (11, 12), area = 11 * 2 = 22.

---

### Test Case 3
**Input:**
6
2 1 5 6 2 3

text
**Output:**  
10

text
**Explanation:**  
Indices 2,3 (5,6): area = 5 * 2 = 10.

---

## Implementation Sketch

public static int[] findLeft(int[] A){ /* ... / }
public static int[] findRight(int[] A){ / ... */ }
public static void main(String[] args) {
Scanner sc = new Scanner(System.in);
int t = sc.nextInt();
while(t-- > 0) {
int n = sc.nextInt();
int[] A = new int[n];
for(int i = 0; i < n; i++) A[i]=sc.nextInt();
int[] left = findLeft(A);
int[] right = findRight(A);
long ans = 0;
for(int i = 0; i < n; i++) {
ans = Math.max(ans, (long)A[i] * (right[i] - left[i] - 1));
}
System.out.println(ans);
}
}

text

---

## Reference

- [Smart Interviews: Rectangular Area Under Histogram](https://hive.smartinterviews.in/contests/smart-interviews-primary/problems/rectangular-area-under-histogram?page=0&pageSize=10&search=hist)